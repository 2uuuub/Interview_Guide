# 性能面试题目  
**1.如何做接口性能测试?**  
  回答:我们项目组的性能测试一般分为3个步骤:  
       第一:搭建性能测试环境,一般区别于SIT/UAT环境,部署一个专用的性能测试环境,使其数据量/服务器性能接近生产环境;  
       第二:确定测试标准:一般和产品/业务确认,接口相应的通过时间,页面打开或渲染的时间,以及并发数(c=nl/t;使用人数*每次使用的时间/每天可能使用的时长)  
       第三:制作/编写测试脚本,用jmeter调试通过所有需要测试的接口,配置好每个接口需要测试的并发数(用线程组模拟并发数),并配置查看结果树/聚合报告;   
       第四:执行脚本/输出性能测试报告;  
       
**2.性能瓶颈一般在什么地方出现?**  
  第一:后端接口逻辑处理不合理,例如对查询量过大的操作,没做限制处理;或者sql太复杂/性能慢等,需要优化sql,修改sql索引等  
  第二:前端组件不支持渲染大批量数据导致性能卡顿,需要优化组件,做分页展示等等,优化缓存处理等  
  第三:服务器硬件因素;加内存,加硬盘,换cpu  
  第四:网络因素,请求量太大,需要加大网络带宽等  
  第五:数据库问题,需要分库分表,优化参数配置;  
  第六:压测工具的瓶颈,例如jmeter,并发数超过200,就会出现严重卡顿;可考虑进行分布式压测;  

**3.对于一些性能较慢的接口，你们是怎么去做优化的？**  
  第一:多表查询的接口 一般是改sql的索引，或者优化sql写法，这个要开发人员分析;  
  第二:插入数据较大的接口，可以改成批量提交;  

**4.接口性能压测关注哪些指标?**  
  第一:响应时间;一般看95%接口响应时间,小于500ms即为合格;  
  第二:错误率;一般为0,即保证所有接口都请求成功;  
  第三:吞吐量;即每秒完成的请求数,接口响应时间越快吞吐量越大;  
     
**5.为什么要做分布式压测?怎么做?**  
  因为jmeter是java写的应用，java应用jvm堆内存heap受负载机硬件限制，虽然我们可以调整堆内存大小，但是单机无法支撑数以万计大并发，此时，需要多个负载机进行分压测试，这样性能瓶颈就不会受负载机硬件限制了  
  第一:确保主机和从机都安装相同的jdk和jmeter  
  第二:确保主从机之间互ping相通  
  第三:配置主/从机的ip和端口号映射  
  第四:启动从机bin目录下jmeter-server文件,目的是让主机能够监听到  
  第五:主机点击运行启动所有,线程数填写${_p(JthreadCount,10)} #10为每台机器并发数  
  第六:查看聚合报告  
  
**6.如何优化一些慢sql?**  
  第一:尽量不要select*,应该select具体字段  
  第二:where接条件尽量少用or增加条件  
  第三:尽量避免返回多余的行,比如用limit1限制行数  
  第四:尽量不使用不等号!=,或者小于/大于号  